# Codebase Structure

**Analysis Date:** 2026-01-12

## Directory Layout

```
costfinders_v2/
├── src/                    # Application source code
│   ├── app/               # Next.js App Router pages
│   ├── components/        # React components (layered)
│   ├── lib/               # Utilities, contexts, mock data
│   └── types/             # TypeScript type definitions
├── public/                # Static assets
├── .planning/             # GSD project planning files
├── biome.json             # Linter/formatter config
├── next.config.ts         # Next.js configuration
├── package.json           # Dependencies and scripts
└── tsconfig.json          # TypeScript configuration
```

## Directory Purposes

**src/app/**
- Purpose: Next.js App Router routes and layouts
- Contains: Page components, route layouts, API routes placeholder
- Key files: `layout.tsx` (root), `page.tsx` (home), `globals.css` (design tokens)
- Subdirectories: `deals/`, `dashboard/`, `business/`, `admin/`

**src/components/ui/**
- Purpose: Design primitives (no business logic)
- Contains: 6 primitive components
- Key files: `button.tsx`, `card.tsx`, `input.tsx`, `badge.tsx`, `modal.tsx`, `tooltip.tsx`
- Import rule: External libraries only

**src/components/patterns/**
- Purpose: Reusable UI compositions
- Contains: 8 pattern components
- Key files: `categoryFilter.tsx`, `blurredImage.tsx`, `saveButton.tsx`, `claimStatusBadge.tsx`
- Import rule: UI layer + external libraries only

**src/components/features/**
- Purpose: Domain-specific components with business logic
- Contains: 41 feature components
- Key files: `dealCard.tsx`, `signUpForm.tsx`, `authModal.tsx`
- Subdirectories: `dealManagement/`, `leadManagement/`, `admin/`, `dealModeration/`, `messaging/`, `analytics/`

**src/components/layout/**
- Purpose: Navigation and app shell
- Contains: Sidebar and header components
- Key files: `globalHeader.tsx`, `dashboardSidebar.tsx`, `businessDashboardSidebar.tsx`, `adminDashboardSidebar.tsx`

**src/lib/context/**
- Purpose: React Context providers for state management
- Contains: 5 context providers
- Key files: `authContext.tsx`, `businessAuthContext.tsx`, `adminAuthContext.tsx`, `locationContext.tsx`, `claimsContext.tsx`

**src/lib/mock-data/**
- Purpose: Simulated database layer (Supabase schema aligned)
- Contains: 14 data files + utilities
- Key files: `index.ts` (exports), `utils.ts` (queries), `deals.ts`, `businesses.ts`, `consumers.ts`

**src/types/**
- Purpose: TypeScript type definitions
- Contains: Domain model interfaces
- Key files: `deal.ts`, `business.ts`, `consumer.ts`, `claim.ts`, `message.ts`

## Key File Locations

**Entry Points:**
- `src/app/layout.tsx` - Root layout with providers
- `src/app/page.tsx` - Home page

**Configuration:**
- `tsconfig.json` - TypeScript with `@/*` path alias
- `biome.json` - Linting and formatting rules
- `next.config.ts` - Next.js settings (images unoptimized)

**Core Logic:**
- `src/lib/context/` - Authentication and state
- `src/lib/mock-data/` - Data layer
- `src/components/features/` - Business logic components

**Testing:**
- No test files (not implemented)

**Documentation:**
- `CLAUDE.md` - Project instructions for Claude
- `.planning/PROJECT.md` - Project definition
- `.planning/ROADMAP.md` - Development phases

## Naming Conventions

**Files:**
- camelCase for all component files (`dealCard.tsx`, `authContext.tsx`)
- camelCase for utilities and hooks (`useGeolocation.ts`)
- PascalCase for exported components (`export function DealCard()`)

**Directories:**
- camelCase for feature subdirectories (`dealManagement/`, `leadManagement/`)
- Singular for type directories (`types/` not `type/`)

**Special Patterns:**
- No barrel files (index.ts) - direct imports only
- `page.tsx` for route pages (Next.js convention)
- `layout.tsx` for route layouts

## Where to Add New Code

**New Feature Component:**
- Primary code: `src/components/features/{feature-name}.tsx`
- Types: `src/types/{domain}.ts`
- Mock data: `src/lib/mock-data/{domain}.ts`

**New Page Route:**
- Implementation: `src/app/{route}/page.tsx`
- Layout if needed: `src/app/{route}/layout.tsx`

**New UI Primitive:**
- Implementation: `src/components/ui/{component}.tsx`
- Must not import from patterns/features

**New Pattern:**
- Implementation: `src/components/patterns/{pattern}.tsx`
- Can only import from UI layer

**New Context:**
- Implementation: `src/lib/context/{name}Context.tsx`
- Add provider to `src/app/layout.tsx`

## Special Directories

**.planning/**
- Purpose: GSD project management files
- Contains: PROJECT.md, ROADMAP.md, STATE.md, phase plans
- Committed: Yes (project documentation)

**node_modules/**
- Purpose: npm dependencies
- Source: Auto-generated by npm install
- Committed: No (gitignored)

---

*Structure analysis: 2026-01-12*
*Update when directory structure changes*
