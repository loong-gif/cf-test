---
phase: 05-consumer-dashboard
plan: 01
type: execute
---

<objective>
Create the consumer dashboard shell with protected route layout and sidebar navigation.

Purpose: Establish the foundation for all consumer dashboard features with consistent navigation and authentication enforcement.
Output: Working dashboard layout at /dashboard with sidebar nav, protected route check, and home/overview page.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
~/.claude/get-shit-done/templates/summary.md
~/.claude/get-shit-done/references/checkpoints.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/04-consumer-auth/04-04-SUMMARY.md

**Tech stack available:** AuthContext with useAuth hook, Consumer type, Modal/Card/Button components
**Established patterns:** Modal view switching, form validation, protected content via useAuth
**Key files:**
@src/lib/context/authContext.tsx
@src/components/features/claimCTA.tsx
@src/app/layout.tsx

**Constraining decisions:**
- Phase 04: AuthContext provides user state, isAuthenticated, signOut
- Phase 04: Consumer has verificationStatus for conditional UI
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create dashboard layout with sidebar navigation</name>
  <files>src/app/dashboard/layout.tsx, src/components/layout/dashboardSidebar.tsx</files>
  <action>
Create a dashboard route group with protected layout:

1. Create `src/app/dashboard/layout.tsx`:
   - Use 'use client' for auth check
   - Import useAuth and redirect from next/navigation
   - If not authenticated or loading, show loading spinner or redirect to home
   - Render DashboardSidebar + main content area
   - Main area: `pt-20 pb-20 md:pb-0` for header/mobile nav clearance

2. Create `src/components/layout/dashboardSidebar.tsx`:
   - Fixed sidebar on left (hidden on mobile, visible md+)
   - Links: My Deals (home), Favorites (Heart icon), Claims (ClipboardText icon), Settings (Gear icon)
   - Use Phosphor icons with light weight (fill for active)
   - Highlight active route using usePathname
   - User avatar/name at bottom with sign out button
   - Glassmorphic styling: bg-surface-glass, backdrop-blur-xl, border-white/10

Mobile: Bottom navigation bar instead of sidebar (same links)
Desktop: 240px fixed sidebar

Match existing glassmorphic patterns from Card component. Use design tokens for colors.
  </action>
  <verify>npm run build succeeds, no TypeScript errors</verify>
  <done>Dashboard layout renders with sidebar on desktop, bottom nav on mobile, protected route redirects unauthenticated users</done>
</task>

<task type="auto">
  <name>Task 2: Create dashboard home page</name>
  <files>src/app/dashboard/page.tsx</files>
  <action>
Create the dashboard home/overview page at `src/app/dashboard/page.tsx`:

1. Server component that shows user greeting and quick stats
2. Display cards for:
   - Saved Deals count (placeholder: "0 saved")
   - Active Claims count (placeholder: "0 claims")
   - Verification status badge
3. Quick action buttons: Browse Deals, Complete Profile (if not fully verified)
4. Use Card component for sections
5. Responsive grid: 1 col mobile, 2 cols tablet, 3 cols desktop

For now, use placeholder data. The context integrations come in later plans.

Page title: "Dashboard | CostFinders"
  </action>
  <verify>Navigate to /dashboard shows overview page with user greeting</verify>
  <done>Dashboard home page displays user greeting, placeholder stats cards, and quick action buttons</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Dashboard shell with sidebar navigation and home page</what-built>
  <how-to-verify>
    1. Run: npm run dev
    2. Sign in as existing user (sarah@example.com)
    3. Navigate to: http://localhost:3000/dashboard
    4. Verify: Sidebar visible on desktop with 4 nav items
    5. Verify: User name/avatar in sidebar, sign out button works
    6. Resize to mobile: Bottom nav appears, sidebar hides
    7. Navigate between nav items: Active state highlights correctly
    8. Sign out and try /dashboard: Should redirect to home
  </how-to-verify>
  <resume-signal>Type "approved" to continue, or describe issues to fix</resume-signal>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `npm run build` succeeds without errors
- [ ] Dashboard layout protects routes (unauthenticated users redirected)
- [ ] Sidebar navigation works on desktop
- [ ] Bottom navigation works on mobile
- [ ] Active route highlighting works
- [ ] Sign out from dashboard works
</verification>

<success_criteria>
- All tasks completed
- All verification checks pass
- Dashboard shell is visually consistent with glassmorphic design
- Navigation is intuitive and responsive
</success_criteria>

<output>
After completion, create `.planning/phases/05-consumer-dashboard/05-01-SUMMARY.md`
</output>
