---
phase: 05-consumer-dashboard
plan: 04
type: execute
---

<objective>
Implement claim status tracking with claims dashboard page.

Purpose: Allow consumers to view and track the status of their deal claims.
Output: ClaimCard component, ClaimStatusBadge, /dashboard/claims page with filtering.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
~/.claude/get-shit-done/templates/summary.md
~/.claude/get-shit-done/references/checkpoints.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/05-consumer-dashboard/05-03-SUMMARY.md

**Tech stack available:** ClaimsContext, Card/Badge components, DealCard patterns
**Established patterns:** Status badges, card components, filtering
**Key files:**
@src/lib/context/claimsContext.tsx
@src/types/claim.ts
@src/lib/mock-data/consumers.ts
@src/components/ui/badge.tsx

**Constraining decisions:**
- ClaimStatus: pending, contacted, booked, completed, cancelled, expired
- Claims have dealId, preferredDate/Time, businessResponse, bookedDate/Time
- Mock claims in consumers.ts show the data structure
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create ClaimCard and ClaimStatusBadge components</name>
  <files>src/components/patterns/claimStatusBadge.tsx, src/components/features/claimCard.tsx</files>
  <action>
1. Create `src/components/patterns/claimStatusBadge.tsx`:
   - Props: status (ClaimStatus)
   - Badge colors:
     - pending: yellow/amber
     - contacted: blue
     - booked: green
     - completed: green (filled)
     - cancelled: red
     - expired: gray
   - Use existing Badge component or create styled span
   - Display capitalized status text

2. Create `src/components/features/claimCard.tsx`:
   - Props: claim (Claim)
   - Display:
     - Deal title (fetch from getAnonymousDealById using claim.dealId)
     - Business name (fetch from getBusinessById using claim.businessId) - revealed since user claimed
     - ClaimStatusBadge
     - Preferred date/time (if provided)
     - Business response (if any)
     - Booked date/time (if booked/completed)
     - Created date (relative: "3 days ago")
   - Card styling: glassmorphic, match DealCard patterns
   - Clickable to expand details or link to deal

3. Empty state for no deal found (edge case: deal deleted)
  </action>
  <verify>ClaimCard renders with status badge, deal info, and claim details</verify>
  <done>ClaimCard and ClaimStatusBadge components display claim information correctly</done>
</task>

<task type="auto">
  <name>Task 2: Create claims dashboard page with filtering</name>
  <files>src/app/dashboard/claims/page.tsx</files>
  <action>
Create the claims tracking page:

1. 'use client' for context access
2. Get claims from useClaims hook
3. Also include mock claims from getClaimsByConsumer if user matches

Filter tabs/buttons:
- All (default)
- Active (pending, contacted, booked)
- Completed
- Cancelled/Expired

Display:
- List of ClaimCard components
- Sort by createdAt descending (newest first)
- Show claim count in each filter tab

Empty state:
- ClipboardText icon (large, muted)
- "No claims yet"
- "Find a deal you love and claim it to get started"
- Link to /deals

Page layout:
- Header: "My Claims"
- Filter tabs below header
- Claims grid/list below

Responsive: Single column on mobile, can expand to 2 cols on desktop if desired.
  </action>
  <verify>Navigate to /dashboard/claims shows claims list with working filters</verify>
  <done>Claims page displays user's claims with status filtering and proper empty state</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Claims dashboard with status tracking</what-built>
  <how-to-verify>
    1. Run: npm run dev
    2. Sign in as sarah@example.com (has mock claims in consumers.ts)
    3. Navigate to: http://localhost:3000/dashboard/claims
    4. Verify: Claims display with status badges
    5. Verify: Filter tabs work (Active, Completed, etc.)
    6. Verify: Business name is revealed (not hidden like anonymous view)
    7. Create a new claim from deal detail page
    8. Verify: New claim appears in claims list as "pending"
  </how-to-verify>
  <resume-signal>Type "approved" to continue, or describe issues to fix</resume-signal>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `npm run build` succeeds without errors
- [ ] ClaimCard displays all claim information
- [ ] Status badges have appropriate colors
- [ ] Filter tabs correctly filter claims
- [ ] New claims appear in the list
</verification>

<success_criteria>
- All tasks completed
- All verification checks pass
- Claims page provides clear status visibility
- Filtering is intuitive
</success_criteria>

<output>
After completion, create `.planning/phases/05-consumer-dashboard/05-04-SUMMARY.md`
</output>
