---
phase: 07-business-dashboard
plan: 03
type: execute
---

<objective>
Create lead inbox for businesses to view and manage consumer deal claims.

Purpose: Enable business owners to see incoming leads, view claim details, and update claim status.
Output: Lead list page showing claims for business's deals, detail view with status management.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md

# Prior plan context:
@.planning/phases/07-business-dashboard/07-01-SUMMARY.md

# Types and patterns:
@src/types/claim.ts
@src/types/deal.ts
@src/lib/mock-data/claims.ts

# Consumer claim patterns to reference:
@src/components/features/claimCard.tsx

**Tech stack available:** Claim type, ClaimStatus, existing claims mock data
**Established patterns:** Status badges, card layouts, detail views
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create LeadList component</name>
  <files>src/components/features/leadManagement/leadList.tsx, src/lib/mock-data/claims.ts</files>
  <action>Create LeadList component displaying claims for business's deals. Add getClaimsForBusiness(businessId) utility to claims.ts that:
1. Gets all deals for the business
2. Filters claims where dealId matches any business deal

List displays:
- Consumer name/email (mock: use consumerId to show "Customer #123")
- Deal title
- Preferred date/time
- Status badge (pending=warning, contacted=info, booked=success, completed=success, cancelled=error)
- Created date (relative: "2 hours ago")
- Click to view details

Include filter tabs: All, Pending (needs response), Active (contacted/booked), Completed, Cancelled. Show count badges on tabs. Empty state for no leads.</action>
  <verify>Component renders, filters work, claims display correctly</verify>
  <done>LeadList shows business leads with status filtering and sorting</done>
</task>

<task type="auto">
  <name>Task 2: Create LeadDetail component and pages</name>
  <files>src/components/features/leadManagement/leadDetail.tsx, src/app/business/dashboard/leads/page.tsx, src/app/business/dashboard/leads/[claimId]/page.tsx</files>
  <action>Create LeadDetail component showing full claim information:
- Claim header with status badge and created date
- Deal info card (title, price, category)
- Customer request section (preferred date/time, notes from consumer)
- Status update section with buttons: Mark Contacted, Mark Booked, Mark Completed, Cancel
- Business response textarea (for internal notes)
- Contact info section (mock: show consumer email/phone if status != pending)

Add updateClaimStatus(claimId, status) and addBusinessResponse(claimId, response) utilities to claims.ts.

Create pages:
1. /business/dashboard/leads - List page with LeadList
2. /business/dashboard/leads/[claimId] - Detail page with LeadDetail

Status transitions: pending→contacted→booked→completed (or cancelled from any state).</action>
  <verify>npm run build passes, lead list and detail pages work, status updates persist in session</verify>
  <done>Lead inbox complete with list view, detail view, and status management</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `npm run build` succeeds without errors
- [ ] /business/dashboard/leads shows filtered lead list
- [ ] /business/dashboard/leads/[id] shows claim details
- [ ] Status update buttons work and reflect in list
- [ ] Filter tabs show correct counts
- [ ] Empty states display appropriately
</verification>

<success_criteria>
- All tasks completed
- All verification checks pass
- No TypeScript errors
- Lead management workflow functional
- Status transitions follow business logic
</success_criteria>

<output>
After completion, create `.planning/phases/07-business-dashboard/07-03-SUMMARY.md`
</output>
