---
phase: 08-admin-core
plan: 02
type: execute
---

<objective>
Create admin dashboard home page with moderation overview and deal moderation page with approve/reject/request changes actions.

Purpose: Enable admins to see platform overview and moderate deals submitted by businesses.
Output: Admin home with key metrics, deal moderation queue with action controls.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/08-admin-core/08-01-SUMMARY.md

**Pattern references:**
@src/app/business/dashboard/page.tsx
@src/components/features/dealManagement/dealTable.tsx
@src/lib/mock-data/deals.ts
@src/lib/mock-data/businesses.ts
@src/lib/mock-data/consumers.ts

**Established patterns:**
- Dashboard home with metric cards (Card component)
- Quick actions section
- Table layouts with status badges
- Glassmorphic card styling
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create admin dashboard home page with moderation overview</name>
  <files>src/app/admin/dashboard/page.tsx</files>
  <action>
    Replace placeholder with full admin home page:

    1. Welcome section with admin name from useAdminAuth

    2. Platform Overview cards (4 cards in grid):
       - Total Deals (count from deals array, filter active)
       - Pending Moderation (mock count: 8)
       - Active Businesses (count businesses with status='active')
       - Total Consumers (count consumers array)
       Use Card component, each with icon, label, and value

    3. Moderation Queue Preview section:
       - Heading "Pending Review"
       - Show 3-4 mock deals needing review (create inline mock data with status 'pending_review')
       - Each item: deal title, business name, submitted date, "Review" button linking to /admin/dashboard/deals

    4. Quick Actions section (similar to business dashboard):
       - "Review Deals" -> /admin/dashboard/deals
       - "Manage Users" -> /admin/dashboard/users
       - "Manage Businesses" -> /admin/dashboard/businesses
       - "Content Settings" -> /admin/dashboard/content

    Style following business dashboard home page patterns.
  </action>
  <verify>npm run build passes. /admin/dashboard shows metrics, preview queue, and quick actions.</verify>
  <done>Admin home page displays platform overview with metrics and moderation preview</done>
</task>

<task type="auto">
  <name>Task 2: Create deal moderation page with approve/reject/changes actions</name>
  <files>src/app/admin/dashboard/deals/page.tsx, src/components/features/dealModeration/dealModerationCard.tsx, src/lib/mock-data/deals.ts</files>
  <action>
    1. Add moderation status to Deal type in src/types/deal.ts:
       - Add optional field: moderationStatus?: 'pending_review' | 'approved' | 'rejected' | 'changes_requested'
       - Add optional field: moderationNotes?: string

    2. Create mock deals with pending_review status in deals.ts:
       - Add 5-6 deals with moderationStatus: 'pending_review' for testing
       - Mix of different categories and businesses

    3. Create DealModerationCard component (src/components/features/dealModeration/dealModerationCard.tsx):
       - Props: deal (with moderation fields), onApprove, onReject, onRequestChanges
       - Display: title, business name (lookup from businesses), category badge, pricing, description preview
       - Show submitted date (createdAt)
       - Action buttons: Approve (green), Request Changes (yellow), Reject (red)
       - Request Changes opens a simple textarea for notes before submitting
       - Use Card, Button, Badge components
       - Glassmorphic styling

    4. Create deals moderation page (src/app/admin/dashboard/deals/page.tsx):
       - Heading "Deal Moderation"
       - Filter tabs: All, Pending Review, Approved, Rejected, Changes Requested
       - Grid of DealModerationCard components
       - Actions update local state (mock - no persistence needed)
       - Show toast/feedback on action (use console.log or simple state message)
       - Empty state when no deals in selected filter

    5. Add helper function to deals.ts:
       - updateDealModeration(dealId, status, notes?) - updates moderation fields
  </action>
  <verify>npm run build passes. /admin/dashboard/deals shows moderation queue. Actions update card state.</verify>
  <done>Deal moderation page functional with approve/reject/request changes workflow</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `npm run build` succeeds without errors
- [ ] Admin home shows 4 metric cards with counts
- [ ] Moderation preview shows pending deals
- [ ] Quick actions navigate to correct routes
- [ ] /admin/dashboard/deals shows moderation queue
- [ ] Filter tabs work (Pending, Approved, etc.)
- [ ] Approve action updates deal status visually
- [ ] Reject action updates deal status visually
- [ ] Request Changes shows notes input before submitting
</verification>

<success_criteria>
- All tasks completed
- All verification checks pass
- No TypeScript errors
- Moderation workflow functional end-to-end
- UI matches established design patterns
</success_criteria>

<output>
After completion, create `.planning/phases/08-admin-core/08-02-SUMMARY.md`
</output>
