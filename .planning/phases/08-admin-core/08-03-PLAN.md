---
phase: 08-admin-core
plan: 03
type: execute
---

<objective>
Create user management pages for consumers and businesses with status controls and filtering.

Purpose: Enable admins to view, search, and manage platform users (both consumers and businesses).
Output: Consumers management page and businesses management page with table views and status actions.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/08-admin-core/08-02-SUMMARY.md

**Pattern references:**
@src/lib/mock-data/consumers.ts
@src/lib/mock-data/businesses.ts
@src/components/features/leadManagement/leadTable.tsx
@src/types/consumer.ts
@src/types/business.ts

**Established patterns:**
- Table layouts with sortable columns
- Status badges (Badge component)
- Search/filter inputs
- Action dropdowns or buttons
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create consumers management page with table and status controls</name>
  <files>src/app/admin/dashboard/users/page.tsx, src/components/features/admin/consumerTable.tsx</files>
  <action>
    1. Create ConsumerTable component (src/components/features/admin/consumerTable.tsx):
       - Props: consumers array, onStatusChange callback
       - Columns: Name (firstName lastName), Email, Phone, Verification Status, Claims Count, Joined Date, Actions
       - Verification status as colored Badge (unverified=gray, email_verified=blue, phone_verified=blue, fully_verified=green)
       - Claims count: count from claims array where consumerId matches
       - Actions dropdown: View Details (placeholder), Suspend, Activate
       - Responsive: hide some columns on mobile
       - Use existing table styling patterns or simple div-based table

    2. Create users management page (src/app/admin/dashboard/users/page.tsx):
       - Heading "User Management" with subtitle "Manage consumer accounts"
       - Search input (filter by name or email)
       - Filter tabs: All, Verified, Unverified, Suspended
       - Add 'status' field to Consumer type if needed ('active' | 'suspended'), default 'active'
       - ConsumerTable with filtered data
       - Stats bar: Total users, Verified users, New this week (mock)
       - Pagination placeholder (show "Showing X of Y users")

    3. Update consumers.ts if needed:
       - Add status field to mock consumers
       - Add helper: updateConsumerStatus(consumerId, status)
  </action>
  <verify>npm run build passes. /admin/dashboard/users shows consumer table with search and filters.</verify>
  <done>Consumers management page displays all consumers with search, filters, and status controls</done>
</task>

<task type="auto">
  <name>Task 2: Create businesses management page with tier/status controls</name>
  <files>src/app/admin/dashboard/businesses/page.tsx, src/components/features/admin/businessTable.tsx</files>
  <action>
    1. Create BusinessTable component (src/components/features/admin/businessTable.tsx):
       - Props: businesses array, onStatusChange, onTierChange callbacks
       - Columns: Name, Location (city), Tier, Status, Deals Count, Rating, Claimed, Actions
       - Tier as colored Badge (unclaimed=gray, free=blue, paid=purple)
       - Status as Badge (active=green, pending=yellow, suspended=red)
       - Deals count from deals array
       - Claimed: Yes/No with claimed date if yes
       - Actions dropdown: View Details, Change Tier, Suspend/Activate, Delete (with confirm)

    2. Create businesses management page (src/app/admin/dashboard/businesses/page.tsx):
       - Heading "Business Management" with subtitle "Manage business profiles"
       - Search input (filter by name or city)
       - Filter tabs: All, Unclaimed, Free, Paid, Suspended
       - BusinessTable with filtered data
       - Stats bar: Total businesses, Claimed %, Paid tier count
       - Quick insight: "X unclaimed businesses with Y total deals"

    3. Add tier change modal/dropdown:
       - Allow admin to upgrade/downgrade tier
       - Update via updateBusinessTier helper (add to businesses.ts)

    4. Update businesses.ts:
       - Add updateBusinessStatus(businessId, status) helper
       - Add updateBusinessTier(businessId, tier) helper
  </action>
  <verify>npm run build passes. /admin/dashboard/businesses shows business table with tier/status management.</verify>
  <done>Businesses management page displays all businesses with tier controls, status management, and filtering</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `npm run build` succeeds without errors
- [ ] /admin/dashboard/users shows consumer table
- [ ] Search filters consumers by name/email
- [ ] Verification status badges display correctly
- [ ] /admin/dashboard/businesses shows business table
- [ ] Tier badges colored correctly (unclaimed/free/paid)
- [ ] Status actions update table state
- [ ] Filter tabs work on both pages
</verification>

<success_criteria>
- All tasks completed
- All verification checks pass
- No TypeScript errors
- Both management pages functional with CRUD-like operations
- Tables are responsive and follow design patterns
</success_criteria>

<output>
After completion, create `.planning/phases/08-admin-core/08-03-SUMMARY.md`
</output>
