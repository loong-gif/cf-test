---
phase: 10-monetization-ui
plan: 05
type: execute
---

<objective>
Create admin monetization overrides and platform-wide pricing configuration.

Purpose: Enable admins to manage tier pricing, override business billing, and configure platform monetization settings.
Output: Admin monetization settings page, business billing overrides, pricing configuration UI.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

**Prior phase context:**
@.planning/phases/10-monetization-ui/10-04-SUMMARY.md (if exists)

**Tech stack available:**
- Next.js 16 with App Router
- Tailwind CSS v4 with glassmorphic design tokens
- Phosphor Icons (@phosphor-icons/react)
- Admin dashboard layout at /admin/dashboard/

**Established patterns:**
- Admin tables from businessTable, userTable
- Admin sidebar navigation
- MetricCard for dashboard stats

**Key files:**
@src/app/admin/dashboard/layout.tsx
@src/app/admin/dashboard/page.tsx
@src/components/features/admin/businessTable.tsx
@src/lib/mock-data/billing.ts
@src/lib/mock-data/leadPricing.ts

**Decisions:**
- Admins can override individual business tier/billing
- Platform-wide pricing settings for tiers, leads, sponsorship
- All UI-only with mock data
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create admin monetization settings page</name>
  <files>src/app/admin/dashboard/monetization/page.tsx, src/lib/mock-data/platformSettings.ts</files>
  <action>
Create platform settings mock data (src/lib/mock-data/platformSettings.ts):
- Tier pricing: { free: 0, paid: 99 } (monthly)
- Lead pricing by tier: { free: 5, paid: 3 }
- Credit package pricing (reuse from leadPricing.ts)
- Sponsorship pricing: { sevenDay: 29, fourteenDay: 49, thirtyDay: 99 }
- Platform fees: { transactionFee: 0.029, platformFee: 0.02 }
- Export getPlatformSettings(), updatePlatformSettings()

Create monetization settings page at /admin/dashboard/monetization/:
- Header: "Monetization Settings" with description
- Section 1: Subscription Tiers
  - Editable price fields for Free ($0 fixed), Paid tier
  - Feature list editor (mock - shows current features)
  - Save changes button
- Section 2: Lead Pricing
  - Per-lead cost by tier (editable inputs)
  - Credit package pricing table (editable)
- Section 3: Sponsored Placements
  - Boost option pricing (editable)
  - Impression multipliers
- Section 4: Platform Fees
  - Transaction fee percentage
  - Platform fee percentage
  - Display calculated example

Use Gear, CurrencyDollar, ChartLine icons
  </action>
  <verify>npm run build succeeds, /admin/dashboard/monetization displays pricing configuration</verify>
  <done>Admin monetization page shows all pricing settings with edit capabilities</done>
</task>

<task type="auto">
  <name>Task 2: Add business billing overrides and navigation</name>
  <files>src/app/admin/dashboard/monetization/business/[businessId]/page.tsx, src/components/features/admin/businessBillingOverride.tsx, src/app/admin/dashboard/layout.tsx</files>
  <action>
Create BusinessBillingOverride component:
- Props: business
- Current tier display with override toggle
- Manual tier assignment (dropdown: unclaimed/free/paid)
- Billing status override (active/suspended/comped)
- Credit grant input (add X credits to business)
- Custom lead pricing override (per-business rate)
- Notes/reason field for override
- Save button with confirmation
- Audit log display (mock: list of past overrides with timestamps)

Create business billing page at /admin/dashboard/monetization/business/[businessId]/:
- Load business by ID
- BusinessBillingOverride component
- Link back to businesses list
- Quick stats: current tier, credits, leads received

Update admin sidebar navigation:
- Add "Monetization" link with CurrencyDollar icon
- Position after Reports, before Data
- Update layout.tsx with new nav item

Add "Billing Override" action to business table:
- In ActionsDropdown, add "Manage Billing" option
- Links to /admin/dashboard/monetization/business/[businessId]
  </action>
  <verify>npm run build succeeds, admin sidebar shows Monetization link, business billing override page works</verify>
  <done>Admin can access monetization settings and override individual business billing</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `npm run build` succeeds without errors
- [ ] Admin sidebar includes Monetization link
- [ ] /admin/dashboard/monetization shows all pricing settings
- [ ] Pricing fields are editable (mock save)
- [ ] Business billing override page accessible from business table
- [ ] Override form allows tier, credits, custom pricing changes
- [ ] Phase 10 complete indicator in success criteria
</verification>

<success_criteria>
- All tasks completed
- All verification checks pass
- No TypeScript errors
- Admin has full monetization control UI
- Business-level overrides functional
- **Phase 10 complete** - All monetization UI implemented
</success_criteria>

<output>
After completion, create `.planning/phases/10-monetization-ui/10-05-SUMMARY.md`

Summary should note:
- Phase 10 complete
- All monetization UI ready for backend integration
- Stripe-ready patterns implemented
- Admin has full control over platform pricing
</output>
