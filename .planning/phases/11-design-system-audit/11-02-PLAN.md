---
phase: 11-design-system-audit
plan: 02
type: execute
---

<objective>
Extend CSS design tokens to support semantic colors as Tailwind utilities.

Purpose: Currently globals.css defines --color-success, --color-warning, etc. as CSS variables, but they're not exposed in the Tailwind @theme directive. This means developers can't use `bg-success/10` or `text-error` - they fall back to hardcoded `bg-green-500/10` and `text-red-400`. Fix this gap.
Output: Extended globals.css @theme with semantic color utilities, updated design-tokens.ts.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/11-design-system-audit/DESIGN-AUDIT.md
@.planning/phases/11-design-system-audit/DESIGN-TOKENS-REFERENCE.md
@src/app/globals.css
@src/lib/design-tokens.ts

**Prior plan 11-01:** Created audit document cataloguing 84+ hardcoded color violations and reference document.

**Key insight:** CSS variables exist for semantic colors but aren't in @theme, so Tailwind utilities don't work.
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add semantic color utilities to Tailwind @theme</name>
  <files>src/app/globals.css</files>
  <action>
Update the @theme inline block in globals.css to expose semantic colors as Tailwind utilities.

Add these color mappings to @theme inline section:

```css
/* Semantic colors */
--color-success: #22c55e;
--color-warning: #f59e0b;
--color-error: #ef4444;
--color-info: #3b82f6;
```

This enables:
- `bg-success`, `text-success`, `border-success`
- `bg-warning`, `text-warning`, `border-warning`
- `bg-error`, `text-error`, `border-error`
- `bg-info`, `text-info`, `border-info`
- Plus opacity modifiers: `bg-success/10`, `text-error/80`, etc.

Also add text colors for the semantic states at different brightness levels for accessibility:
```css
/* Semantic text variants (lighter for dark backgrounds) */
--color-success-text: #4ade80;
--color-warning-text: #fbbf24;
--color-error-text: #f87171;
--color-info-text: #60a5fa;
```

IMPORTANT: Keep the existing :root CSS variables AND add to @theme. The @theme block exposes them as Tailwind utilities.

Place the new tokens after the existing brand colors section in @theme inline, before the shadow definitions.
  </action>
  <verify>
grep "color-success" src/app/globals.css
grep "color-error" src/app/globals.css
grep "@theme inline" src/app/globals.css -A 50 | grep "success"
  </verify>
  <done>
globals.css @theme inline block includes:
- --color-success, --color-warning, --color-error, --color-info
- --color-success-text, --color-warning-text, --color-error-text, --color-info-text
- Tailwind can now generate bg-success, text-error, etc.
  </done>
</task>

<task type="auto">
  <name>Task 2: Update design-tokens.ts with semantic color utilities</name>
  <files>src/lib/design-tokens.ts</files>
  <action>
First read the current design-tokens.ts file to understand its structure.

Then update the colors.semantic object to match the new CSS variables:

```typescript
semantic: {
  success: 'var(--color-success)',
  successText: 'var(--color-success-text)',
  warning: 'var(--color-warning)',
  warningText: 'var(--color-warning-text)',
  error: 'var(--color-error)',
  errorText: 'var(--color-error-text)',
  info: 'var(--color-info)',
  infoText: 'var(--color-info-text)',
},
```

Also add a new `tailwindClasses` object that provides ready-to-use class strings for common patterns:

```typescript
export const semanticClasses = {
  success: {
    badge: 'bg-success/10 border-success/20 text-success-text',
    text: 'text-success-text',
    bg: 'bg-success',
    bgSubtle: 'bg-success/10',
  },
  warning: {
    badge: 'bg-warning/10 border-warning/20 text-warning-text',
    text: 'text-warning-text',
    bg: 'bg-warning',
    bgSubtle: 'bg-warning/10',
  },
  error: {
    badge: 'bg-error/10 border-error/20 text-error-text',
    text: 'text-error-text',
    bg: 'bg-error',
    bgSubtle: 'bg-error/10',
  },
  info: {
    badge: 'bg-info/10 border-info/20 text-info-text',
    text: 'text-info-text',
    bg: 'bg-info',
    bgSubtle: 'bg-info/10',
  },
}
```

This provides a migration path: components can import semanticClasses.success.badge instead of hardcoding class strings.
  </action>
  <verify>
grep "successText" src/lib/design-tokens.ts
grep "semanticClasses" src/lib/design-tokens.ts
npm run build 2>&1 | head -20  # Verify no TypeScript errors
  </verify>
  <done>
design-tokens.ts includes:
- Updated semantic color variables with text variants
- New semanticClasses export with badge, text, bg, bgSubtle for each semantic color
- TypeScript compiles without errors
  </done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `npm run build` succeeds without errors
- [ ] Semantic colors available in both CSS and JS forms
- [ ] semanticClasses provides ready-to-use class strings
- [ ] globals.css @theme includes all 8 semantic color tokens
</verification>

<success_criteria>
- All tasks completed
- No TypeScript or build errors
- Tailwind can now use bg-success, text-error, etc.
- semanticClasses export available for component migration
</success_criteria>

<output>
After completion, create `.planning/phases/11-design-system-audit/11-02-SUMMARY.md`
</output>
