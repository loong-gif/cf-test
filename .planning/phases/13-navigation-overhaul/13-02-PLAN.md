---
phase: 13-navigation-overhaul
plan: 02
type: execute
---

<objective>
Integrate PageHeader into dashboard layouts and clean up ad-hoc navigation patterns.

Purpose: Apply consistent breadcrumb navigation across all dashboard modules, removing duplicate back button implementations.
Output: All dashboard pages have consistent breadcrumb navigation with proper hierarchy.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
~/.claude/get-shit-done/templates/summary.md
~/.claude/get-shit-done/references/checkpoints.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

# Components from 13-01
@src/lib/routes.ts
@src/components/patterns/pageHeader.tsx

# Layout to modify
@src/components/layout/authenticatedDashboardLayout.tsx

# Pages with ad-hoc back buttons to clean up
@src/app/business/dashboard/deals/[dealId]/edit/page.tsx
@src/app/business/dashboard/leads/[claimId]/page.tsx

**Tech stack available:** Next.js 16, React, TypeScript, Tailwind CSS v4, Phosphor Icons
**Established patterns:** PageHeader component from 13-01
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add PageHeader to AuthenticatedDashboardLayout</name>
  <files>src/components/layout/authenticatedDashboardLayout.tsx</files>
  <action>
Import and add PageHeader to the authenticated dashboard layout so all dashboard pages automatically get breadcrumb navigation.

Modify the layout to include PageHeader in the main content area:

```typescript
import { PageHeader } from '@/components/patterns/pageHeader'

// In the authenticated render section, wrap children with PageHeader:
<main className="flex-1 p-4 sm:p-6 lg:p-8 pb-20 md:pb-8 overflow-auto">
  <PageHeader />
  {children}
</main>
```

The PageHeader will automatically:
- Show breadcrumbs based on current route
- Display back button when appropriate
- Hide on root dashboard pages (handled internally)

Do NOT modify the sidebar, auth logic, or loading states - only add PageHeader to the main content area.
  </action>
  <verify>`npm run build` passes, breadcrumbs appear on dashboard pages</verify>
  <done>PageHeader renders in all authenticated dashboard layouts</done>
</task>

<task type="auto">
  <name>Task 2: Clean up ad-hoc back buttons from pages</name>
  <files>src/app/business/dashboard/deals/[dealId]/edit/page.tsx, src/app/business/dashboard/leads/[claimId]/page.tsx</files>
  <action>
Remove duplicate back button implementations from pages that now get navigation from PageHeader.

**For deals/[dealId]/edit/page.tsx:**
- Remove the `<Button variant="ghost" size="sm" onClick={() => router.push('/business/dashboard/deals')}>` with ArrowLeft
- Remove the ArrowLeft import (if no longer used)
- Keep the h1 titles in error states but simplify layout
- The DealForm component handles its own submission, no changes needed there

Before (error state example):
```tsx
<div className="flex items-center gap-4">
  <Button variant="ghost" size="sm" onClick={() => router.push('/business/dashboard/deals')}>
    <ArrowLeft size={20} weight="light" />
  </Button>
  <h1 className="text-2xl font-bold text-text-primary">Edit Deal</h1>
</div>
```

After:
```tsx
<h1 className="text-2xl font-bold text-text-primary">Edit Deal</h1>
```

The PageHeader in the layout handles back navigation, so page-level back buttons are now redundant.

**For leads/[claimId]/page.tsx:**
- Check if it has ad-hoc back button and remove if present
- Pattern same as above

Note: Only remove back buttons in the page header area. Keep any "Back to X" buttons in empty states or error states that serve as primary CTAs (those are different from navigation back buttons).
  </action>
  <verify>`npm run build` passes, pages render without duplicate headers</verify>
  <done>Ad-hoc back buttons removed, pages use PageHeader for navigation</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Integrated breadcrumb navigation across all dashboard modules (consumer, business, admin)</what-built>
  <how-to-verify>
    1. Run: `npm run dev`
    2. Test Consumer Dashboard:
       - Visit: http://localhost:3000/dashboard
       - Verify: No breadcrumbs on root dashboard (expected)
       - Click "Claims" in sidebar
       - Verify: Breadcrumbs show "Dashboard > My Claims"
       - Verify: Back button appears next to title
       - Click back button → returns to /dashboard
    3. Test Business Dashboard:
       - Visit: http://localhost:3000/business/dashboard
       - Navigate to: Deals → click a deal → Edit
       - Verify: Breadcrumbs show "Dashboard > Deals" (or deeper if on edit page)
       - Verify: Back button works correctly
       - Navigate to: Settings → Account & Billing
       - Verify: Breadcrumbs show full path
    4. Test Admin Dashboard:
       - Visit: http://localhost:3000/admin/dashboard
       - Navigate to: Content → Categories
       - Verify: Breadcrumbs show "Dashboard > Content > Categories"
       - Navigate to: Monetization
       - Verify: Back button returns to dashboard
    5. Mobile test (resize to 375px):
       - Verify: Breadcrumbs hidden on mobile
       - Verify: Back button still visible and works
       - Verify: No layout shift or overflow
  </how-to-verify>
  <resume-signal>Type "approved" to continue, or describe issues to fix</resume-signal>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `npm run build` succeeds without errors
- [ ] `npm run lint` passes
- [ ] Breadcrumbs display correctly on all dashboard pages
- [ ] Back navigation works on all nested pages
- [ ] No duplicate back buttons in page headers
- [ ] Mobile layout works (breadcrumbs hidden, back button visible)
- [ ] Human verification approved
</verification>

<success_criteria>
- All tasks completed
- All verification checks pass
- Human verification approved
- Phase 13 complete
</success_criteria>

<output>
After completion, create `.planning/phases/13-navigation-overhaul/13-02-SUMMARY.md`
</output>
