# Plan 18-01: Error Messaging System

**Phase:** 18 - Error Messaging System
**Milestone:** v1.2 Messaging Style Guide
**Depends on:** Phase 17 (Voice & Tone Definition) - Complete

---

## Objective

Create a comprehensive error messaging system document (ERROR-MESSAGES.md) that standardizes all error patterns across the CostFinders platform. This extends the basic error patterns from WRITING-RULES.md with expanded categories, module-specific tone variations, recovery guidance, and implementation patterns.

---

## Context

### From Phase 17 (Foundation)
- VOICE.md: Error context should be "Helpful + Clear"
- TONE.md: Module variations defined:
  - Consumer: "Helpful, non-blaming"
  - Business: "Clear, solution-oriented"
  - Admin: "Factual, precise"
- WRITING-RULES.md: Basic patterns established:
  - Required field: "{Field} is required"
  - Invalid format: "Please enter a valid {field}"
  - Constraint violation: "{Field} must be {requirement}"
  - Action failure: "Failed to {action}. Please try again."

### From Phase 16 Audit
- 78 error messages cataloged across modules
- Consistent patterns found for validation errors
- Gaps identified: network errors, auth errors, system errors

### Current Codebase Analysis
- Form validation uses `setErrors` state pattern
- Error display varies (inline, toast-like, banners)
- No standardized recovery messaging
- No toast library currently in use (custom patterns)

---

## Deliverables

### Primary: ERROR-MESSAGES.md

A comprehensive error messaging guide covering:

1. **Error Philosophy** (~200 words)
   - Error messaging principles aligned with voice/tone
   - "Every error is an opportunity to help" mindset

2. **Error Categories** (~600 words)
   - Form Validation Errors (field-level)
   - Business Logic Errors (workflow violations)
   - Network/Connectivity Errors
   - Authentication Errors
   - Authorization/Permission Errors
   - System/Server Errors
   - Rate Limiting Errors
   - Session/Timeout Errors

3. **Module-Specific Tone Matrix** (~300 words)
   - Consumer error tone with examples
   - Business error tone with examples
   - Admin error tone with examples
   - Shared patterns across modules

4. **Error Pattern Templates** (~500 words)
   - Field validation patterns
   - Action failure patterns
   - Network error patterns
   - Permission error patterns
   - System error patterns
   - Full template library with copy-paste examples

5. **Error Recovery Guidance** (~400 words)
   - When to suggest retry
   - When to suggest alternative action
   - When to suggest contact support
   - Recovery message templates

6. **Display Patterns** (~300 words)
   - Inline field errors
   - Form-level errors (banners)
   - Toast/notification errors
   - Page-level errors (error boundaries)
   - Duration and dismissal rules

7. **Implementation Guidelines** (~200 words)
   - Error state management pattern
   - Error component usage
   - Accessibility considerations

---

## Research

### Required Research (Brief)

1. **Error Message UX Best Practices**
   - Nielsen Norman Group error message guidelines
   - Microcopy.me patterns
   - Key principle extraction (not full read)

2. **Friendly Error Copy Patterns**
   - Stripe error messages as reference
   - Slack error patterns
   - GitHub error patterns

3. **Recovery Messaging Patterns**
   - When "try again" is appropriate
   - When to escalate to support
   - Progressive error handling

---

## Tasks

### Task 1: Research & Pattern Collection
**Output:** Research notes integrated into ERROR-MESSAGES.md
**Actions:**
- Review UX error message best practices (10 min)
- Collect friendly error patterns from reference apps (10 min)
- Map to CostFinders context

### Task 2: Create ERROR-MESSAGES.md Structure
**Output:** Complete ERROR-MESSAGES.md in `.planning/messaging/`
**Sections:**
1. Error Philosophy
2. Error Categories (8 categories with definitions)
3. Module-Specific Tone Matrix
4. Error Pattern Templates (complete library)
5. Error Recovery Guidance
6. Display Patterns
7. Implementation Guidelines

### Task 3: Error Template Library
**Output:** Copy-paste ready error messages for all scenarios
**Coverage:**
- 15+ validation error patterns
- 5+ network error patterns
- 5+ authentication error patterns
- 5+ permission error patterns
- 5+ system error patterns
- Module-specific variations where needed

### Task 4: Update ROADMAP.md
**Output:** Phase 18 marked with plan details
**Actions:**
- Update 18-01 from TBD to descriptive title
- Mark research status

---

## Success Criteria

- [ ] ERROR-MESSAGES.md created with all 7 sections
- [ ] 40+ unique error message templates documented
- [ ] All 8 error categories covered with patterns
- [ ] Module-specific tone variations provided
- [ ] Recovery guidance for each error category
- [ ] Display pattern recommendations documented
- [ ] ROADMAP.md updated with plan details

---

## Estimated Scope

| Component | Effort |
|-----------|--------|
| Research | Low |
| Documentation | Medium |
| Template creation | Medium |
| **Total** | ~45-60 min |

---

## Notes

- This is documentation-only (no code changes)
- Phase 19-23 will apply these patterns to the codebase
- Error patterns should support future i18n extraction
- Focus on patterns that match existing codebase structure
