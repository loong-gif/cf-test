---
phase: 21-form-validation
plan: 01
type: execute
domain: messaging
---

<objective>
Create comprehensive FORM-VALIDATION.md documenting input validation messages, inline feedback patterns, and helper text guidelines for all CostFinders forms.

Purpose: Standardize form validation copy across consumer, business, and admin modules for consistency with established voice and tone.
Output: FORM-VALIDATION.md guide with field validation catalog, inline feedback patterns, and helper text guidelines.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

**Messaging system guides (follow same structure):**
@.planning/messaging/VOICE.md
@.planning/messaging/TONE.md
@.planning/messaging/ERROR-MESSAGES.md
@.planning/messaging/SUCCESS-MESSAGES.md
@.planning/messaging/EMPTY-STATES.md

**Note:** ERROR-MESSAGES.md section 4.1 contains field validation patterns. This guide expands with:
- Form-by-form validation catalog
- Inline feedback patterns (real-time validation, character counters)
- Helper text guidelines (format hints, placeholder text)
- Validation timing rules

**Forms in codebase requiring documentation:**
- Consumer: signUpForm, signInForm, profileForm, alertPreferences, claimDealModal
- Business: createBusinessForm, claimBusinessFlow, businessProfileForm, dealForm, mockPaymentForm
- Admin: admin login, content management forms
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create FORM-VALIDATION.md structure and philosophy</name>
  <files>.planning/messaging/FORM-VALIDATION.md</files>
  <action>
Create FORM-VALIDATION.md with sections:

**1. Form Validation Philosophy**
- Validation timing principles (validate on blur, submit, real-time)
- User experience goals (prevent errors, guide success)
- Reference ERROR-MESSAGES.md for message templates
- Voice trait: Helpful + Clear

**2. Validation Timing Rules**
- When to validate: blur vs change vs submit
- Real-time validation candidates (password strength, character count)
- Debounce patterns for async validation
- Field dependency validation (confirm password, date ranges)

**3. Inline Feedback Patterns**
| Pattern | Use Case | Example |
|---------|----------|---------|
| Character counter | Bio, descriptions | "245/500 characters" |
| Password strength | Password creation | Weak/Medium/Strong indicator |
| Real-time format | Phone, URL | Format as user types |
| Availability check | Email, username | "Checking..." then result |

**4. Helper Text Guidelines**
- Format hints in placeholder: "you@example.com"
- Requirement hints below label: "Min. 8 characters"
- Context help: "We'll send verification to this email"

Follow ERROR-MESSAGES.md and EMPTY-STATES.md format/structure.
  </action>
  <verify>cat .planning/messaging/FORM-VALIDATION.md | head -100</verify>
  <done>FORM-VALIDATION.md exists with philosophy, timing rules, inline feedback patterns, helper text guidelines</done>
</task>

<task type="auto">
  <name>Task 2: Add field validation catalog by form</name>
  <files>.planning/messaging/FORM-VALIDATION.md</files>
  <action>
Add sections 5-7:

**5. Field Validation Catalog**
Reference field patterns from ERROR-MESSAGES.md section 4.1, then document form-specific rules:

5.1 Common Field Validations (all modules)
| Field | Required | Format | Min/Max | Example Messages |
|-------|----------|--------|---------|------------------|
| Email | Yes | email | - | "Email is required", "Please enter a valid email address" |
| Password | Yes | - | 8+ chars | "Password is required", "Password must be at least 8 characters" |
| Phone | Varies | phone | - | "Please enter a valid phone number" |
| URL | No | URL | - | "Please enter a valid URL (e.g., https://example.com)" |

5.2 Consumer Module Forms
- Sign Up Form: email*, password*, confirmPassword*, firstName, lastName
- Sign In Form: email*, password*
- Profile Form: firstName, lastName, phone, location
- Alert Preferences: email toggle, SMS toggle, frequency select
- Claim Deal Modal: preferredDate, preferredTime, notes

5.3 Business Module Forms
- Create Business Form: businessName*, email*, phone*, address*, city*, state*, zip*
- Business Profile Form: businessName*, description, website, phone*, logo
- Deal Form: title*, description*, originalPrice*, discountedPrice*, category*, expirationDate
- Payment Form: cardNumber*, expirationDate*, cvv*, billingZip*

5.4 Admin Module Forms
- Admin Login: email*, password*, 2FA code
- Content Management: name*, slug*, description, status

Use * to indicate required fields.

**6. Module-Specific Tone Matrix**
Reference TONE.md and apply to validation context:
- Consumer: Encouraging, patient ("Almost there!")
- Business: Professional, efficient ("Required for publishing")
- Admin: Factual, concise ("Required")

**7. Real-Time Validation Behaviors**
Document real-time validation for specific fields:
- Password strength meter: Show as user types
- Email availability: Debounce 500ms, show spinner, then result
- Character counters: Update on every keystroke
- Date validation: Validate when both dates populated (date ranges)
  </action>
  <verify>grep -c "##" .planning/messaging/FORM-VALIDATION.md</verify>
  <done>Field validation catalog complete with all form types and module-specific guidance</done>
</task>

<task type="auto">
  <name>Task 3: Add implementation patterns and quick reference</name>
  <files>.planning/messaging/FORM-VALIDATION.md</files>
  <action>
Add sections 8-9:

**8. Implementation Patterns**

8.1 Validation Function Structure
```typescript
// Standard validation pattern
const validateField = (value: string, rules: ValidationRules): string | undefined => {
  if (rules.required && !value.trim()) {
    return `${rules.label} is required`;
  }
  if (rules.minLength && value.length < rules.minLength) {
    return `${rules.label} must be at least ${rules.minLength} characters`;
  }
  // Additional rules...
  return undefined;
};
```

8.2 Helper Text Component Pattern
```typescript
// Field with helper text
<Input
  label="Password"
  helperText="Min. 8 characters, including a number"
  error={errors.password}
/>
```

8.3 Character Counter Pattern
```typescript
// Textarea with counter
<Textarea
  label="Description"
  maxLength={500}
  showCount
  value={description}
/>
// Display: "245/500 characters"
```

8.4 Accessibility Requirements
- aria-describedby for helper text and errors
- aria-invalid="true" on error fields
- role="alert" on error messages
- Focus management on submit errors

**9. Quick Reference Card**

### Validation Timing
| Trigger | Use For |
|---------|---------|
| On blur | Most fields (email, text, select) |
| On change | Real-time feedback (password strength, counters) |
| On submit | Final validation, async checks |
| Debounced | Async validation (availability, uniqueness) |

### Message Templates
| Scenario | Template |
|----------|----------|
| Required | "{Field} is required" |
| Invalid format | "Please enter a valid {field}" |
| Too short | "{Field} must be at least {min} characters" |
| Too long | "{Field} must be {max} characters or less" |
| Mismatch | "{Field} must match {other field}" |

### Helper Text Examples
| Field Type | Helper Text |
|------------|-------------|
| Password | "Min. 8 characters" |
| Phone | "We'll text you a verification code" |
| URL | "Include https://" |
| Date | "Must be a future date" |

### Do's and Don'ts
**Do:**
- Validate on blur for most fields
- Show helper text before user makes mistake
- Clear errors when user starts correcting
- Focus first error field on submit

**Don't:**
- Validate on every keystroke (except counters/strength)
- Show all errors at once before user tries
- Use vague messages ("Invalid input")
- Disable submit button based on validation

Update ROADMAP.md to mark 21-01 complete.
  </action>
  <verify>tail -50 .planning/messaging/FORM-VALIDATION.md</verify>
  <done>Implementation patterns and quick reference complete, ROADMAP updated</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] FORM-VALIDATION.md exists with all 9 sections
- [ ] Philosophy and timing rules documented
- [ ] Inline feedback patterns (counters, strength, availability) documented
- [ ] Helper text guidelines established
- [ ] Field validation catalog covers consumer, business, admin forms
- [ ] Module-specific tone variations included
- [ ] Implementation patterns provided
- [ ] Quick reference card present
- [ ] Format consistent with ERROR-MESSAGES.md and SUCCESS-MESSAGES.md
- [ ] ROADMAP.md updated with plan completion
</verification>

<success_criteria>

- All tasks completed
- All verification checks pass
- FORM-VALIDATION.md is comprehensive (500+ lines expected)
- Patterns are specific and actionable
- Guide references ERROR-MESSAGES.md appropriately (no duplication)
</success_criteria>

<output>
After completion, create `.planning/phases/21-form-validation/21-01-SUMMARY.md`
</output>
