---
phase: 24-seo-foundation
plan: 02
type: execute
---

<objective>
Create programmatic sitemap and establish SEO utility library for metadata and schema generation.

Purpose: Enable search engines to discover all CostFinders pages (static + dynamic location pages) and provide reusable utilities for building page-specific metadata.
Output: Working sitemap.ts, src/lib/seo/ directory with metadata helpers and schema builders
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/24-seo-foundation/24-RESEARCH.md
@.planning/phases/24-seo-foundation/24-01-SUMMARY.md

**From 24-01:** Root metadata foundation in place, robots.ts created, dependencies installed

**Current location data:**
- 6 cities (Austin, Dallas, Houston, Los Angeles, New York, Miami)
- 4 states (TX, CA, NY, FL)
- 16 location areas (neighborhoods)
- Data in src/lib/mock-data/locations.ts

**Key pages to include:**
- Static: /, /deals, /about (if exists), /contact (if exists)
- Dynamic: Future state/city pages will use generateStaticParams

@src/lib/mock-data/locations.ts
@src/app/layout.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create sitemap.ts with static and location pages</name>
  <files>src/app/sitemap.ts</files>
  <action>
    Create new file src/app/sitemap.ts:
    1. Import MetadataRoute from 'next'
    2. Import getCities from '@/lib/mock-data/locations'
    3. Export default async function sitemap(): Promise<MetadataRoute.Sitemap>
    4. Define baseUrl = process.env.NEXT_PUBLIC_BASE_URL || 'https://costfinders.com'
    5. Build static pages array:
       - { url: baseUrl, lastModified: new Date(), changeFrequency: 'weekly', priority: 1.0 }
       - { url: `${baseUrl}/deals`, lastModified: new Date(), changeFrequency: 'daily', priority: 0.9 }
    6. Build location pages from getCities() (for future state/city routes):
       - Map cities to future URLs like `${baseUrl}/${slugify(state)}/${slugify(city)}`
       - changeFrequency: 'weekly', priority: 0.7
    7. Return combined array

    Helper: Create inline slugify function (lowercase, replace spaces with hyphens).
    Note: Location URLs are placeholders for Phase 25-27 routes; sitemap is forward-looking.
  </action>
  <verify>Run `npm run dev`, visit http://localhost:3000/sitemap.xml and verify XML output</verify>
  <done>sitemap.xml returns valid XML with all static pages + location placeholder URLs</done>
</task>

<task type="auto">
  <name>Task 2: Create SEO utility library structure</name>
  <files>src/lib/seo/index.ts, src/lib/seo/metadata.ts, src/lib/seo/schemas.ts</files>
  <action>
    Create src/lib/seo/ directory with three files:

    **src/lib/seo/metadata.ts:**
    - Export generateLocationMetadata(city, state, dealCount): Metadata
      - Returns title, description, openGraph, alternates.canonical for location pages
    - Export SITE_CONFIG object with name, url, description, social handles
    - Helper: buildCanonicalUrl(path: string) using metadataBase

    **src/lib/seo/schemas.ts:**
    - Import types from schema-dts: WithContext, WebSite, Organization, BreadcrumbList
    - Export buildWebsiteSchema(): WithContext<WebSite>
      - Standard schema for the website entity
    - Export buildOrganizationSchema(): WithContext<Organization>
      - CostFinders organization with logo, social links
    - Export buildBreadcrumbSchema(items: {name, url}[]): WithContext<BreadcrumbList>
      - Reusable breadcrumb builder for location hierarchy

    **src/lib/seo/index.ts:**
    - Barrel export from metadata.ts and schemas.ts
    - Export types and functions for easy imports

    Use schema-dts types for full type safety. All schemas return JSON-LD objects (not JSX yet).
  </action>
  <verify>Run `npm run build` to verify TypeScript compiles. Check types resolve correctly.</verify>
  <done>src/lib/seo/ directory exists with 3 files, all exports type-check successfully</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `npm run build` succeeds without errors
- [ ] http://localhost:3000/sitemap.xml returns valid XML
- [ ] src/lib/seo/ contains metadata.ts, schemas.ts, index.ts
- [ ] Schema builder functions export proper WithContext types
</verification>

<success_criteria>
- All tasks completed
- All verification checks pass
- No TypeScript errors
- Sitemap accessible, SEO utilities ready for component usage
</success_criteria>

<output>
After completion, create `.planning/phases/24-seo-foundation/24-02-SUMMARY.md`
</output>
