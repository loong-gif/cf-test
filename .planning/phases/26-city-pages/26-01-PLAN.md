---
phase: 26-city-pages
plan: 01
type: execute
domain: seo
---

<objective>
Create city-level landing pages with neighborhood breakdown and featured deals for SEO.

Purpose: Extend location hierarchy to city level (State > City > Neighborhood) for targeted local SEO
Output: Dynamic [state]/[city] routes with SSG, neighborhood grid, deal preview, and sitemap integration
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

**Prior Phase (25-state-pages):**
@.planning/phases/25-state-pages/25-01-SUMMARY.md

**Established Patterns:**
- generateStaticParams for location-based SSG
- Location page hierarchy: Home > State > City > Neighborhood
- Stats aggregation pattern for parent pages
- BreadcrumbSchema for structured data
- Server Components only - no client hydration

**Key Source Files:**
@src/app/[state]/page.tsx
@src/lib/mock-data/states.ts
@src/lib/mock-data/locations.ts
@src/lib/seo/metadata.ts
@src/components/features/cityCard.tsx
@src/app/sitemap.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create city data helpers</name>
  <files>src/lib/mock-data/cities.ts</files>
  <action>
Create city data helpers following states.ts pattern:
- getCityBySlug(stateSlug, citySlug) - returns City | undefined
- getNeighborhoodsForCity(cityId) - returns LocationArea[]
- getCityStats(cityId) - returns { neighborhoodCount, dealCount, businessCount }
- slugifyNeighborhood(name) - convert area name to URL slug
- getAllCitiesWithState() - returns array of { city, state } for generateStaticParams

Import existing data from locations.ts. Use getAreasForCity for neighborhoods.
Stats should aggregate from neighborhoods similar to getStateStats pattern.
  </action>
  <verify>TypeScript compiles, imports work: `npm run build 2>&1 | head -20`</verify>
  <done>City helpers exported and type-safe</done>
</task>

<task type="auto">
  <name>Task 2: Create city landing page route</name>
  <files>src/app/[state]/[city]/page.tsx</files>
  <action>
Create dynamic city page following [state]/page.tsx structure:

1. generateStaticParams - loop all cities with state slugs
2. generateMetadata - use generateLocationMetadata from lib/seo/metadata.ts
3. Page component with:
   - BreadcrumbSchema (Home > State > City)
   - Visual breadcrumb nav matching state page
   - Hero section: glassmorphic card with city name, state, stats (neighborhoods, deals, providers)
   - "Browse by Neighborhood" grid using NeighborhoodCard component (Task 3)
   - Empty state if no neighborhoods
   - Use notFound() for invalid city/state combinations

Follow exact styling from [state]/page.tsx - same glassmorphic hero, same stats row pattern.
Server Component only - no 'use client'.
  </action>
  <verify>Visit http://localhost:3000/texas/austin - page renders with neighborhoods</verify>
  <done>City page renders with correct metadata, breadcrumbs, hero, and neighborhood grid</done>
</task>

<task type="auto">
  <name>Task 3: Create neighborhood card component</name>
  <files>src/components/features/neighborhoodCard.tsx</files>
  <action>
Create NeighborhoodCard following CityCard pattern exactly:

Props:
- name: string (e.g., "Downtown Austin")
- slug: string (e.g., "downtown-austin")
- citySlug: string (e.g., "austin")
- stateSlug: string (e.g., "texas")
- cityName: string (e.g., "Austin")
- dealCount: number
- businessCount: number

Structure:
- Link to /${stateSlug}/${citySlug}/${slug} (Phase 27 will implement)
- Same glassmorphic styling as CityCard
- MapPin icon, neighborhood name, city name subtitle
- Stats row with deals and providers counts
- ArrowRight with hover animation

Server Component with SSR-safe icons from @phosphor-icons/react/dist/ssr
  </action>
  <verify>TypeScript compiles, component exports correctly</verify>
  <done>NeighborhoodCard renders in city page grid with correct links</done>
</task>

<task type="auto">
  <name>Task 4: Update sitemap with city URLs</name>
  <files>src/app/sitemap.ts</files>
  <action>
Add dynamic city pages to sitemap:

1. Import getAllCitiesWithState from cities.ts
2. Generate city page entries with pattern: ${baseUrl}/${state.slug}/${city.slug}
3. Set changeFrequency: 'weekly', priority: 0.7 (lower than state pages)

Add after statePages section. Comment noting neighborhood pages added in Phase 27.
  </action>
  <verify>`npm run build && cat .next/server/app/sitemap.xml/route.js | grep -o "austin" | head -3` shows city URLs</verify>
  <done>sitemap.xml includes all city URLs</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>City landing pages with neighborhood breakdown and SEO integration</what-built>
  <how-to-verify>
    1. Run: npm run dev
    2. Visit: http://localhost:3000/texas (state page)
    3. Click: "Austin" city card
    4. Verify: Redirects to /texas/austin
    5. Verify: Hero shows "Medspa Deals in Austin, Texas" with stats
    6. Verify: Breadcrumb shows Home > Texas > Austin
    7. Verify: Neighborhood grid shows Downtown Austin, North Austin, South Austin
    8. Verify: Each neighborhood card links to /texas/austin/{neighborhood}
    9. Test: Visit /california/los-angeles - should show Beverly Hills, Santa Monica, West Hollywood
    10. Test: Visit /invalid/city - should show 404
  </how-to-verify>
  <resume-signal>Type "approved" or describe issues to fix</resume-signal>
</task>

</tasks>

<verification>
Before declaring phase complete:
- [ ] `npm run build` succeeds without errors
- [ ] All 6 cities generate static pages (austin, dallas, houston, los-angeles, new-york, miami)
- [ ] City pages show correct neighborhood counts
- [ ] BreadcrumbSchema renders in page source
- [ ] Sitemap includes all city URLs
- [ ] 404 for invalid state/city combinations
</verification>

<success_criteria>
- All tasks completed
- All verification checks pass
- City pages follow exact patterns from state pages
- No TypeScript errors
- SSG generating all city pages
</success_criteria>

<output>
After completion, create `.planning/phases/26-city-pages/26-01-SUMMARY.md` with:
- Frontmatter following 25-01-SUMMARY.md pattern
- requires: Phase 25 (state pages with navigation)
- provides: City routes, neighborhood data helpers, NeighborhoodCard
- affects: [27-neighborhood-pages, 30-dynamic-sitemap]
- Duration, accomplishments, files, decisions, deviations, issues
</output>
